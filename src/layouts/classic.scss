body:is(.layout-classic, .layout-minimal):not(.is-mobile) {
  // Side panels
  &:not(.stacked-nav-off) .mod-sidedock.mod-left-split {
    .sidebar-toggle-button::after {
      height: var(--tab-outline-width);
      background-color: var(--tab-outline-color);
      content: "";
      position: absolute;
      inset: auto -100vw 0;
    }
    .mod-top-left-space {
      .workspace-tab-header-container {
        border-bottom: none;
      }
      .workspace-tab-header-container-inner {
        overflow: visible;
        position: relative;
        padding-top: 8px;
      }
      .workspace-leaf-content > .nav-header,
      .workspace-leaf-content > .view-content > div:not(.nav-buttons-container):not(.graph-controls) {
        padding-top: 0;
        padding-bottom: 8px;
      }
    }
  }
  .mod-sidedock {
    & > .workspace-leaf-resize-handle {
      border-color: var(--background-modifier-border);
    }

    .workspace-leaf-content > .nav-header,
    .workspace-leaf-content > .view-content > div:not(.nav-buttons-container):not(.graph-controls) {
      padding-top: 8px;
      padding-bottom: 0;
    }
  }

  // Ribbon fix
  &.show-ribbon.mod-macos {
    --ribbon-padding: calc(var(--header-height) + 8px) 0 0 16px;
  }
  &.show-ribbon.mod-macos,
  &.show-ribbon:not(.mod-macos).stacked-nav-off {
    .workspace-ribbon {
      position: relative;
    }
    .workspace-ribbon::before {
      height: var(--tab-outline-width);
      background-color: var(--tab-outline-color);
      content: "";
      position: absolute;
      inset: calc(var(--header-height) - 1px) 0;
    }
  }

  // Style Settings: Tabs fix
  &.tabs-floating .mod-root .workspace-tab-header-container-inner,
  &.tabs-floating-center .mod-root .workspace-tab-header-container-inner {
    padding-right: 1px;
  }

  // Style Settings: Status bar fix
  &.status-bar-full {
    --status-bar-border-width: 1px 0 0 0;
  }
}

// Tab outline fix
body:is(.layout-classic, .layout-minimal) {
  &.tabs-underline .mod-root .workspace-tab-header-container-inner {
    --tab-outline-width: 0;
  }

  &:not(:not(.is-mobile):is(.colorful-frame, .theme-light.contrast-light-vivid)) {
    --tab-outline-width: var(--border-width);

    &:not(.tabs-floating, .tabs-floating-center) .mod-root .workspace-tab-header-container-inner {
      padding-top: 1px;
      margin-bottom: -1px;
    }

    .mod-root .workspace-tabs .workspace-tab-container {
      border-radius: 0;
    }
  }
}

body.layout-classic:is(.tabs-floating, .tabs-floating-center) .workspace .mod-root .workspace-tab-header {
  background-color: var(--background-primary);
}

body.layout-minimal {
  &:not(.is-mobile).theme-light.contrast-light-vivid .mod-root .workspace-tab-header-container-inner {
    padding-top: 1px;
    margin-bottom: -1px;
  }

  &:is(.tabs-floating, .tabs-floating-center) {
    --tab-outline-width: 0;

    .mod-root {
      --tab-outline-width: 0 !important;

      .workspace-tab-header-container-inner {
        padding-top: 0;
        margin-bottom: 0;
      }
    }
  }

  .mod-sidedock .workspace-tabs:not(.mod-top) .workspace-tab-header-container {
    border-bottom: none;
    background-color: transparent;
  }

  .workspace > .mod-root,
  .workspace-drawer.mod-right,
  .mod-sidedock.mod-right-split,
  .mod-sidedock.mod-right-split .workspace-tabs .workspace-leaf {
    --mobile-sidebar-background: var(--background-primary);
    background-color: var(--background-primary);
  }
}
