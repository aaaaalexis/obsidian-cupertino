/* @settings

name: Cupertino
id: cupertino
settings:
    -
        id: cupertino-desc
        description: Most of the settings are for **turning off** Cupertino customizations. You don't need to change anything if you want to keep all default Cupertino optimizations.
        type: info-text
        markdown: true
    -
        id: alt-heading-off
        title: Disable alternative heading style
        description: Turn off all caps and opacity adjustment for H4, H5 and H6.
        type: class-toggle
    -
        id: active-line-off
        title: Disable active editing line highlight
        type: class-toggle
    -
        id: full-table-off
        title: Disable full width table
        type: class-toggle
    -
        id: hide-frontmatter-off
        title: Show frontmatter foldable heading
        type: class-toggle
    -
        id: compact-mode
        title: Compact view
        type: class-toggle
    -
        id: desktop-header
        title: Desktop & Tablet
        type: heading
        level: 1
        collapsed: true
    -
        id: accented-frame-opacity
        title: Accented window
        description: Higher value reduces overall interface contrast.
        type: variable-number-slider
        default: 0
        min: 0
        max: 100
        step: 5
    -
        id: windows-mode-off
        title: Use macOS style
        description: Turn off Fluent styling on Windows.
        type: class-toggle
    -
        id: tablet-menu-fix
        title: Disable menu theming
        description: Turn off context menu theming on tablet. Enable if you're having touch issues in menu. 
        type: class-toggle
    -
        id: blur-effect-off
        title: Reduce transparency
        type: class-toggle
    -
        id: center-tabs-off
        title: Disable centered tabs
        type: class-toggle
    -
        id: hide-nav-header-off
        title: Disable auto hiding panel actions
        type: class-toggle
    -
        id: hide-status-off
        title: Always show status bar
        type: class-toggle
    -
        id: mobile-header
        title: Mobile
        type: heading
        level: 1
        collapsed: true
    -
        id: quick-mode-switch-off
        title: Disable Quick Mode Switcher
        type: class-toggle
    -
        id: hide-tabs-count-off
        title: Show tabs count
        type: class-toggle
*/

/* General */

body {
  --anim-motion-cupertino: cubic-bezier(0, 0.5, 0.25, 1);
  --background-modifier-border: var(--divider-color);
  --background-modifier-border-focus: hsla(var(--interactive-accent-hsl), 0.5);
  --background-modifier-message: var(--background-secondary);
  --background-modifier-hover: rgba(var(--mono-rgb-100), 0.05);
  --blockquote-border-color: var(--color-base-50);
  --blockquote-border-thickness: 4px;
  --caret-color: var(--text-accent);
  --callout-padding: 16px;
  --callout-radius: var(--radius-s);
  --checkbox-radius: var(--radius-xl);
  --code-white-space: pre-wrap;
  --code-size: var(--font-smaller);
  --code-background: var(--background-primary-alt);
  --code-normal: var(--text-muted);
  --code-comment: var(--text-faint);
  --code-function: var(--color-orange);
  --code-important: var(--color-orange);
  --code-keyword: var(--color-red);
  --code-property: var(--color-blue);
  --code-punctuation: var(--text-muted);
  --code-string: var(--color-cyan);
  --code-tag: var(--color-red);
  --code-value: var(--color-purple);
  --dialog-width: fit-content;
  --divider-color-hover: var(--text-normal);
  --dropdown-background-size: var(--icon-s);
  --dropdown-padding: 4px 16px 4px 8px;
  --embed-border-start: none;
  --embed-block-shadow-hover: none;
  --font-text-theme: -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
  --font-interface-theme: -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
  --hr-color: var(--background-modifier-hover);
  --icon-opacity: 1;
  --input-height: 24px;
  --input-radius: var(--radius-m);
  --line-height-normal: 1.6;
  --link-decoration: none;
  --link-external-decoration: none;
  --list-spacing: 0.2em;
  --metadata-padding: 0;
  --metadata-property-radius-focus: var(--input-radius);
  --metadata-property-radius-hover: var(--input-radius);
  --metadata-property-radius: var(--input-radius);
  --modal-border-color: rgba(255, 255, 255, 0.15) !important;
  --nav-item-color: var(--text-normal);
  --nav-item-padding: 8px 8px 8px 24px;
  --prompt-border-color: var(--modal-border-color);
  --radius-l: 12px;
  --radius-m: 6px;
  --radius-s: 6px;
  --radius-xl: 12px;
  --ribbon-background-collapsed: transparent;
  --ribbon-background: transparent;
  --ribbon-padding: 4px 8px;
  --ribbon-width: 56px;
  --search-icon-size: var(--icon-s);
  --slider-track-height: 4px;
  --slider-track-background: var(--background-modifier-border-hover);
  --tab-background-active: var(--background-primary-alt);
  --tab-container-background: transparent;
  --tab-divider-color: transparent;
  --tab-max-width: var(--tab-width);
  --tab-outline-width: 0;
  --tab-radius-active: var(--radius-s);
  --tab-radius: var(--radius-s);
  --tag-border-width: var(--border-width);
  --tag-size: var(--font-smallest);
  --text-highlight-bg: rgba(var(--color-orange-rgb), 0.25);
  --text-selection: var(--background-modifier-hover);
  --titlebar-background-focused: transparent;
  --titlebar-background: transparent;
  --toggle-border-width: var(--border-width);
  --toggle-s-border-width: var(--toggle-border-width);
  --toggle-s-thumb-height: var(--toggle-thumb-height);
  --toggle-s-thumb-width: var(--toggle-thumb-width);
  --toggle-s-width: var(--toggle-width);
  --toggle-thumb-height: 13px;
  --toggle-thumb-width: 13px;
  --toggle-width: 26px;
  --view-header-height: 40px;
  --workspace-background-translucent: rgb(from var(--background-primary) r g b / 75%);

  /* Light Theme */
  &.theme-light {
    --background-modifier-cover: rgba(170, 170, 170, 0.6);
    --background-modifier-border-hover: var(--color-base-25);
    --color-red-rgb: 255, 59, 48;
    --color-red: #ff3b30;
    --color-orange-rgb: 255, 149, 0;
    --color-orange: #ff9500;
    --color-yellow-rgb: 255, 204, 0;
    --color-yellow: #ffcc00;
    --color-green-rgb: 40, 205, 65;
    --color-green: #28cd41;
    --color-cyan-rgb: 85, 190, 240;
    --color-cyan: #55bef0;
    --color-blue-rgb: 0, 122, 255;
    --color-blue: #007aff;
    --color-purple-rgb: 175, 82, 222;
    --color-purple: #af52de;
    --color-pink-rgb: 255, 45, 85;
    --color-pink: #ff2d55;
    --divider-color: rgba(0, 0, 0, 0.05) !important;
    --modal-border-color: rgba(0, 0, 0, 0.1);
    --modal-background: rgb(from var(--background-secondary) r g b / 90%) !important;
    --input-shadow: inset 0 -0.15px 0 0.5px rgba(0, 0, 0, 0.2), 0 1px 1.5px 0 rgba(0, 0, 0, 0.03), 0 0.3px 0.5px 0 rgba(0, 0, 0, 0.1) !important;

    --code-normal: #383a42;
    --code-comment: #b6b9c5;
    --code-function: #b76b02;
    --code-important: #b76b02;
    --code-keyword: #e45749;
    --code-property: #62afef;
    --code-punctuation: #383a42;
    --code-string: #0d97b3;
    --code-tag: #e45749;
    --code-value: #a626a4;

    .menu,
    .suggestion-container,
    .prompt,
    .modal {
      outline: var(--prompt-border-width) solid rgba(0, 0, 0, 0.15);
    }
  }

  /* Dark Theme */
  &.theme-dark {
    --background-modifier-cover: rgba(0, 0, 0, 0.6);
    --color-red-rgb: 255, 69, 58;
    --color-red: #ff453a;
    --color-orange-rgb: 255, 159, 10;
    --color-orange: #ff9f0a;
    --color-yellow-rgb: 255, 214, 10;
    --color-yellow: #ffd60a;
    --color-green-rgb: 50, 215, 75;
    --color-green: #32d74b;
    --color-cyan-rgb: 90, 200, 245;
    --color-cyan: #5ac8f5;
    --color-blue-rgb: 10, 132, 255;
    --color-blue: #0a84ff;
    --color-purple-rgb: 191, 90, 242;
    --color-purple: #bf5af2;
    --color-pink-rgb: 255, 55, 95;
    --color-pink: #ff375f;
    --divider-color: rgba(255, 255, 255, 0.05) !important;
    --modal-border-color: rgba(0, 0, 0, 1);
    --modal-background: rgb(from var(--color-base-25) r g b / 90%) !important;
    --interactive-normal: var(--color-base-40);
    --input-shadow: inset 0 0.5px 0px 0px rgba(255, 255, 255, 0.3), 0 2px 2px 0 rgba(0, 0, 0, 0.1), 0 1px 1px 0 rgba(0, 0, 0, 0.1), 0 1px 1px 0 rgba(0, 0, 0, 0.1) !important;

    --code-normal: #abb2bf;
    --code-comment: #5c6370;
    --code-function: #d19a66;
    --code-important: #d19a66;
    --code-keyword: #e16d76;
    --code-property: #62afef;
    --code-punctuation: #abb2bf;
    --code-string: #58b6c2;
    --code-tag: #e16d76;
    --code-value: #c678de;

    .menu,
    .suggestion-container,
    .prompt,
    .modal {
      outline: var(--prompt-border-width) solid black;
    }
  }

  &:not(.is-mobile) {
    --icon-xl: 24px;

    &.theme-light {
      --shadow-s: 0px 1px 2px rgba(0, 0, 0, 0.028), 0px 3.4px 6.7px rgba(0, 0, 0, 0.042), 0px 15px 30px rgba(0, 0, 0, 0.07);
      --shadow-l: rgba(0, 0, 0, 0.56) 0px 22px 70px 4px;
    }
    &.theme-dark {
      --shadow-s: 0px 1px 2px rgba(0, 0, 0, 0.028), 0px 3.4px 6.7px rgba(0, 0, 0, 0.042), 0px 15px 30px rgba(0, 0, 0, 0.07);
      --shadow-l: rgba(0, 0, 0, 0.56) 0px 22px 70px 4px;
    }
  }

  &:not(.is-phone) {
    --header-height: 48px;
  }

  &.is-mobile {
    --background-modifier-form-field: var(--interactive-normal) !important;
    --border-width: 0.3px;
    --divider-color: rgba(var(--mono-rgb-100), 0.1) !important;
    --divider-width: 0.3px;
    --canvas-dot-pattern: var(--color-base-20);
    --checkbox-size: var(--icon-m);
    --icon-xs-stroke-width: 2px;
    --icon-s-stroke-width: 1.5px;
    --icon-m-stroke-width: 1.5px;
    --icon-l-stroke-width: 1.5px;
    --icon-xl-stroke-width: 1px;
    --input-height: 44px;
    --input-radius: 10px;
    --mobile-sidebar-width: 100%;
    --mobile-toolbar-height: var(--input-height);
    --modal-background: rgb(from var(--background-secondary) r g b / 75%) !important;
    --nav-item-background-active: var(--color-accent);
    --nav-item-background-selected: var(--color-accent);
    --nav-item-color-active: var(--text-on-accent);
    --nav-item-padding: 16px;
    --radius-l: 16px;
    --radius-m: 10px;
    --radius-s: 10px;
    --radius-xl: 16px;
    --shadow-s: rgba(0, 0, 0, 0.1) 0px 8px 30px;
    --slider-thumb-height: 28px;
    --slider-thumb-y: -12px;
    --slider-thumb-width: 28px;
    --slider-track-height: 4px;
    --tab-switcher-background: var(--modal-background);
    --tab-switcher-menubar-background: var(--tab-switcher-background);
    --toggle-border-width: 2px;
    --toggle-thumb-height: 27px;
    --toggle-thumb-width: 27px;
    --toggle-width: 51px;
    --toolbar-option-width: calc(16px + var(--mobile-toolbar-height));
    --view-header-height: 44px;

    padding: 0;

    &.theme-light {
      --interactive-normal: var(--background-primary);
    }
    &.theme-dark {
      --interactive-normal: var(--background-secondary);
    }
  }

  &.is-phone {
    --file-header-justify: flex-start;
    --mobile-sidebar-max-width: 100%;
    --tab-outline-width: 1px;
    --tab-outline-width: 1px;
  }

  &.is-tablet {
    --dropdown-padding: 4px 32px 4px 16px;
    --prompt-input-height: 56px;

    .mod-root {
      padding-top: var(--safe-area-inset-top);
    }

    &.show-ribbon {
      --ribbon-width: 52px;
    }
  }

  &:not(.is-focused) {
    --workspace-background-translucent: var(--background-secondary);
  }

  &:not(.show-view-header):not(.is-phone) {
    --view-header-height: 0px;

    .view-header {
      display: flex !important;

      > div {
        display: none;
      }
    }
  }

  &.compact-mode {
    --nav-item-padding: 6px 8px 6px 24px;

    &.is-mobile {
      --nav-item-padding: 12px 16px;
      .nav-files-container .tree-item-icon.collapse-icon {
        right: 16px;
      }
      .suggestion-item {
        padding: 8px 16px !important;
      }
    }
  }
}

@media (prefers-color-scheme: light) {
  body.theme-dark {
    --workspace-background-translucent: var(--background-primary);

    .app-container {
      background-color: var(--background-primary);
    }
  }
}
@media (prefers-color-scheme: dark) {
  body.theme-light {
    --workspace-background-translucent: var(--background-primary);

    .app-container {
      background-color: var(--background-primary);
    }
  }
}

/********** Animation **********/

@keyframes fadeInUp {
  0% {
    transform: translateY(16px);
    opacity: 0;
  }
}

@keyframes fadeInDown {
  from {
    transform: translateY(-16px);
    opacity: 0;
  }
}

@keyframes fadeInScale {
  from {
    transform: scale(0.95);
    opacity: 0;
  }
}

@keyframes blurInScale {
  from {
    transform: scale(1.1);
    opacity: 0;
    filter: blur(16px);
  }
  50% {
    transform: scale(0.99);
  }
}

body.is-mobile {
  .workspace-drawer.mod-left {
    @starting-style {
      transform: translateX(-100%);
    }
  }

  .workspace-drawer.mod-right {
    @starting-style {
      transform: translateX(100%);
    }
  }

  .workspace-drawer.mod-left,
  .workspace-drawer.mod-right,
  .menu {
    transition-duration: var(--anim-duration-moderate) !important;
    transition-timing-function: var(--anim-motion-cupertino) !important;
  }
}

body.is-phone {
  .menu {
    @starting-style {
      transform: translateY(100%);
    }
  }
}

body,
body .app-container,
body.is-mobile .app-container,
body.is-phone .app-container,
body.is-tablet .app-container {
  align-items: center;
  transition: all var(--anim-duration-moderate) !important;
  overflow: hidden;
}

body:not(.is-mobile) {
  .workspace-ribbon,
  .workspace-split.mod-root,
  .workspace-split,
  .workspace-tabs .workspace-leaf,
  .workspace-split.mod-left-split .workspace-sidedock-vault-profile {
    background-color: transparent;
  }

  &:not(.is-translucent) .horizontal-main-container {
    background-color: var(--background-secondary);
  }

  .workspace {
    transition: background-color var(--anim-duration-slow) !important;
    background-color: hsla(var(--color-accent-hsl), calc(var(--accented-frame-opacity) * 0.005));
  }

  .workspace-sidedock-vault-profile {
    border: none !important;
    --vault-profile-color: var(--text-muted);
    --icon-color: var(--text-muted);
  }
}

.titlebar {
  background-color: transparent !important;
}

/********** Input Components **********/

.clickable-icon {
  transition: all 0.1s ease-in-out !important;
  padding: 4px 8px;
}

.is-flashing {
  --text-highlight-bg: hsla(var(--color-accent-hsl), 0.25);
}

.search-input-container {
  display: flex;
  align-items: center;
  overflow: visible;

  &:before {
    top: unset !important;
  }

  input {
    padding-inline-start: 32px !important;
  }
}

body:not(.is-mobile) {
  textarea,
  input[type="text"]:not(.metadata-container input):not(.prompt input),
  input[type="number"],
  input[type="search"],
  button:not(.clickable-icon),
  select,
  .dropdown {
    box-shadow: var(--input-shadow);
    border: none;
    height: unset;
    min-height: var(--input-height);
    font-weight: normal;
    line-height: unset;
    letter-spacing: -0.015em;
  }
  textarea,
  input[type="text"]:not(.metadata-container input):not(.prompt input),
  input[type="number"],
  input[type="search"] {
    box-shadow: none;
    border: var(--border-width) solid var(--background-modifier-border);

    &:active,
    &:focus,
    &:focus-visible {
      box-shadow: 0 0 0 2px var(--background-modifier-border-focus);
    }

    &:disabled,
    &:disabled:active,
    &:disabled:focus,
    &:disabled:focus-visible {
      box-shadow: none !important;
      color: var(--text-muted);
    }
  }

  button {
    position: relative;
    padding: 4px 10px;
  }
  button[class*="mod-"]:not(.mod-cancel):not(.mod-destructive):not(.mod-bookmark):not(.mod-secondary)::before {
    position: absolute;
    inset: 0;
    border-radius: var(--button-radius);
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0) 100%);
    pointer-events: none;
    content: "";
  }
  select,
  .dropdown {
    padding: 4px 32px 4px 10px;
  }

  .checkbox-container {
    box-shadow: 0px 0px 1px 0px rgba(0, 0, 0, 0.02) inset, 0px 0.5px 1.5px 0px rgba(0, 0, 0, 0.12) inset;

    &.is-enabled {
      box-shadow: 0px 0.5px 2.5px 0px rgba(102, 102, 102, 0.75) inset;
      background: linear-gradient(180deg, rgba(102, 102, 102, 0.75) 0%, rgba(102, 102, 102, 0) 67.71%), var(--interactive-accent);
      background-blend-mode: overlay, normal;
    }

    &::after {
      box-shadow: 0px 0.2px 0.25px 0px rgba(0, 0, 0, 0.12);
    }
  }
}

body.is-mobile {
  button,
  select,
  .dropdown {
    box-shadow: none !important;
  }

  .clickable-icon {
    background-color: transparent;
    padding: 10px;
    min-width: var(--input-height);
    height: var(--input-height);
  }

  .clickable-icon.is-active {
    opacity: 1;
    background-color: var(--interactive-accent);
    color: var(--text-on-accent);
  }

  .checkbox-container {
    box-shadow: none;
    overflow: hidden;

    &::after {
      box-shadow: 0px 0px 0px 1px rgba(0, 0, 0, 0.04), 0px 3px 8px 0px rgba(0, 0, 0, 0.15), 0px 3px 1px 0px rgba(0, 0, 0, 0.06);
    }
  }

  input[type="range"]::-webkit-slider-thumb {
    box-shadow: 0px 0.5px 4px 0px rgba(0, 0, 0, 0.12), 0px 6px 13px 0px rgba(0, 0, 0, 0.12);
  }
}

body.is-phone {
  textarea,
  input[type="text"]:not(.metadata-container input):not(.prompt input),
  input[type="number"],
  button:not(.clickable-icon):not(.modal:not(.mod-settings):not(.mod-community-modal) button):not(.view-content button),
  select,
  .dropdown {
    justify-content: flex-start;
    background-color: var(--interactive-normal);
    padding: 0 16px;
    min-height: var(--input-height);
    font-weight: normal;
    text-align-last: unset;
  }

  button:not(.clickable-icon):not(.modal:not(.mod-settings):not(.mod-community-modal) button):not(.view-content button),
  select,
  .dropdown {
    color: var(--text-accent);
  }

  .setting-item-control button {
    color: var(--text-accent);
  }
}

body.is-tablet {
  textarea,
  input[type="text"]:not(.metadata-container input):not(.prompt input),
  input[type="number"],
  button:not(.clickable-icon):not(.modal:not(.mod-settings) button):not(.view-content button) {
    padding: 4px 16px;
  }
}

/********** Ribbon & Sidebar **********/

.side-dock-settings,
.side-dock-actions {
  gap: 4px;
}

.nav-files-container > div {
  display: flex;
  flex-direction: column;
  gap: 4px;
}
.tree-item-self {
  align-items: center;
  transition: background-color var(--anim-duration-fast);
  margin-bottom: 0;
  letter-spacing: -0.015em;

  &:hover {
    cursor: pointer;
  }
}
.search-results-info .dropdown {
  box-shadow: none !important;
  background-color: transparent;
}
.search-results-children .tree-item-inner {
  color: var(--text-normal);
}

body:not(.is-mobile) {
  &.show-ribbon .mod-sidedock.mod-left-split {
    margin-left: -8px;
  }
  .workspace .workspace-ribbon,
  .workspace .workspace-ribbon.mod-left:before,
  .workspace .mod-sidedock > .workspace-leaf-resize-handle {
    border: none;
  }

  .workspace-split.mod-sidedock .workspace-leaf-content > .node-insert-event,
  .workspace-split.mod-sidedock .workspace-leaf-content > .view-content {
    padding: 4px 16px 16px;
  }

  .workspace-split.mod-sidedock .workspace-leaf-content .nav-header {
    padding: 4px 16px;
  }

  .view-content > .node-insert-event {
    padding: 0;
  }

  .search-row {
    margin: 4px 16px;
  }

  .view-content .nav-header {
    padding: 4px 0;
  }

  /* Unfocused window opacity */
  &:not(.is-focused) {
    .workspace-ribbon,
    .mod-sidedock > div,
    .mod-root .workspace-tab-header-container {
      opacity: 0.5;
    }
  }

  /* Auto hide panel actions */
  &:not(.hide-nav-header-off) .mod-sidedock .workspace-leaf-content > .nav-header,
  &:not(.hide-nav-header-off) .mod-sidedock .view-content > .nav-header {
    .nav-buttons-container,
    .nav-action-button,
    svg.svg-icon {
      transition: var(--anim-duration-fast) var(--anim-duration-fast) !important;
    }

    &:not(:hover):not(:has(.is-active)):not(:has(.has-active-menu)) .nav-buttons-container {
      gap: 4px;
      background-color: transparent;
      padding: 0;

      .nav-action-button {
        flex-grow: 0;
        background-color: var(--background-modifier-hover);
        padding: 2px;
        width: unset;
        height: unset;
      }
      svg.svg-icon {
        --icon-size: 0px;
      }
    }
  }

  /* Panel actions style */
  .nav-buttons-container {
    border-radius: calc(var(--clickable-icon-radius) + 2px);
    background-color: var(--background-modifier-hover);
    padding: 2px;
  }
  .nav-action-button {
    position: relative;
    flex-grow: 1;
    padding: 4px;
    height: 100%;
  }
  .nav-action-button.is-active,
  .nav-action-button.is-active:hover {
    box-shadow: 0px 0.25px 0.25px 0px rgba(0, 0, 0, 0.15), 0px 1px 0.75px 0px rgba(0, 0, 0, 0.05);
    background-color: var(--background-primary);
    color: var(--icon-color);
  }

  /* Hide indent line */
  .tree-item-children {
    margin-bottom: 0;
    border-inline-start: none;
  }

  /* Text positioning */
  .tree-item-self:not(.mod-collapsible) {
    gap: 4px;
  }
}

body.is-mobile {
  &.theme-light .workspace-drawer {
    background-color: var(--background-secondary);
  }
  &.theme-dark .workspace-drawer {
    background-color: var(--background-primary);
  }

  .workspace-drawer-backdrop {
    background-color: transparent;
  }

  .workspace-drawer {
    border-radius: 0;

    .workspace-drawer-inner {
      background-color: transparent;
    }
    .workspace-drawer-header-info {
      font-size: var(--font-ui-smaller);
    }

    .workspace-drawer-active-tab-container {
      background-color: transparent;
    }
    .workspace-drawer-active-tab-header {
      margin: 0;
      background-color: transparent;
      padding: 0 24px;

      select {
        width: auto;
      }
    }
    .workspace-drawer-active-tab-icon {
      display: none;
    }
    .workspace-drawer-active-tab-title {
      flex-grow: 0;
      color: var(--text-accent);
    }
    .workspace-drawer-active-tab-chevron {
      margin-inline-start: 0;
      color: var(--text-accent);
    }

    .view-content {
      padding: 12px 16px 96px;
      overflow: auto;
    }
    .view-content > div:not(.nav-header):not(:empty) {
      border-radius: var(--input-radius);
      background-color: var(--interactive-normal);

      &:not(.node-insert-event) {
        padding: 8px 16px;
      }
    }
    .search-result-file-title {
      color: var(--text-normal);
    }
    .search-result-file-matches {
      margin: 0;
      box-shadow: none;
      border: var(--border-width) solid var(--background-modifier-border);
    }
    .search-result-file-match {
      padding: 16px;
    }
  }

  .nav-files-container {
    padding: 8px 16px !important;

    & > div {
      gap: 0;
      margin-bottom: 80px;
      border-radius: var(--input-radius);
      background-color: var(--interactive-normal);
      overflow: hidden;
    }
    .tree-item {
      position: relative;
      border-radius: 0;
    }
    .tree-item:not(:last-child)::before {
      position: absolute;
      right: 0;
      bottom: 0;
      border-bottom: var(--border-width) solid var(--background-modifier-border);
      width: 100%;
      content: "";
    }
    .tree-item-self {
      border-radius: 0;
      padding-inline-end: var(--nav-item-parent-padding);
    }
    .tree-item-children {
      position: relative;
      margin-bottom: 0;
      border-inline-start: none;
    }
    .tree-item-children::before {
      position: absolute;
      top: 0;
      right: 0;
      border-top: var(--border-width) solid var(--background-modifier-border);
      width: calc(100% + var(--nav-item-children-margin-start));
      content: "";
    }
    .tree-item-icon.collapse-icon {
      right: var(--nav-item-parent-padding);
      margin-inline-start: unset;
    }
  }

  .empty-state {
    background-color: transparent !important;
  }
}

body.is-tablet {
  &.theme-dark .workspace-drawer {
    background-color: var(--background-primary-alt);
  }

  .workspace-drawer {
    &.is-pinned {
      border-color: var(--hr-color);
      background-color: var(--background-primary);
      padding-top: calc(var(--safe-area-inset-top) + 16px);
    }
  }

  .side-dock-ribbon {
    padding-left: 12px;
  }

  .side-dock-actions {
    padding: 0;
  }
}

/********** Tabs **********/

.sidebar-toggle-button {
  background-color: transparent !important;
}

body.center-tabs-off .mod-root .workspace-tab-header-container-inner {
  justify-content: flex-start !important;
  padding: 0 !important;
}

.mod-root .workspace-tabs {
  container-type: inline-size;
}

@container (max-width: 480px) {
  .mod-root .workspace-tab-header-container-inner {
    justify-content: flex-start !important;
    padding: 0 !important;
  }
}

body:not(.is-phone) {
  &:not(.show-ribbon):not(.hider-sidebar-buttons) .mod-sidedock.mod-left-split .mod-top-left-space .workspace-tab-header-container-inner {
    margin-left: 40px;
  }

  .workspace {
    .workspace-tab-header-container-inner {
      position: relative;
      border-radius: var(--tab-radius);
      padding: 0;
    }

    .sidebar-toggle-button {
      align-items: center;
      padding: 0;
      height: var(--header-height);
    }
  }

  .workspace .mod-root .workspace-tabs:not(.mod-stacked) {
    .workspace-tab-header-container-inner {
      flex-grow: 1;
      justify-content: center;
      gap: 4px;
    }

    .workspace-tab-header {
      opacity: 0.5;
      border: none;
      background-color: var(--background-modifier-hover);
      padding: 0;

      &::before,
      &::after {
        display: none;
      }
    }

    .workspace-tab-header.is-active {
      opacity: 1;
      box-shadow: none;
      min-width: 200px;
    }

    .workspace-tab-header-inner {
      padding-inline-start: 12px;
      padding-inline-end: 8px;
    }
    .workspace-tab-header-inner-title {
      line-height: normal;
    }

    .workspace-tab-header-spacer {
      display: none;
    }

    .workspace-tab-header-new-tab,
    .workspace-tab-header-tab-list {
      margin: 0;
      padding: unset;
    }
    .workspace-tab-header-tab-list .clickable-icon {
      padding: 0;
      width: 16px;
    }
  }

  .workspace .mod-sidedock {
    .workspace-tab-header-container-inner {
      gap: 0px;
      transition: var(--anim-duration-fast);
    }
    .workspace-tab-header-container-inner:not(:hover) .workspace-tab-header.is-active {
      background-color: transparent;
    }

    .workspace-tab-header-container-inner:hover {
      background-color: var(--background-modifier-hover);
    }

    .workspace-tab-header-inner {
      padding: 0 10px;
    }

    .workspace-tab-header:not(.is-active) .workspace-tab-header-inner-icon {
      opacity: 0.5;
    }
  }

  .workspace .mod-sidedock.mod-left-split .mod-top-left-space .sidebar-toggle-button.mod-left {
    position: absolute;
    left: max(var(--frame-left-space), 8px);
  }
}

body:not(.is-mobile) {
  .workspace-tab-header-container .clickable-icon {
    padding: 4px;
    width: 32px;
    height: 32px;
  }
  .workspace-tab-header-container-inner {
    margin: 8px 0;
  }
  .sidebar-toggle-button {
    align-items: center;
    padding: 0;
    height: var(--header-height);
  }
  .sidebar-toggle-button .clickable-icon,
  .workspace-ribbon .clickable-icon {
    padding: 4px;
    width: 40px;
    height: 32px;
  }
}

body.mod-macos.is-hidden-frameless {
  &:not(.is-fullscreen) .workspace-tabs.mod-top-left-space .workspace-tab-header-container {
    padding-left: var(--frame-left-space);
  }

  &.is-fullscreen {
    --frame-left-space: 0;

    &.show-ribbon .mod-sidedock.mod-left-split .workspace-tab-header-container,
    &.show-ribbon .mod-root .sidebar-toggle-button.mod-left {
      z-index: var(--layer-popover);
      margin-left: calc(-1 * var(--ribbon-width));
    }
  }

  &.show-ribbon {
    .workspace .mod-sidedock.mod-left-split .mod-top-left-space .sidebar-toggle-button.mod-left {
      left: calc(var(--frame-left-space) + 8px);
    }
    .mod-sidedock.mod-left-split .mod-top-left-space .workspace-tab-header-container-inner {
      margin-left: 48px;
    }

    .workspace:not(.is-left-sidedock-open):not(.is-right-sidedock-open) .mod-root .workspace-tab-header-container-inner {
      padding-right: 0;
      padding-left: 32px;
    }
    .workspace.is-left-sidedock-open:not(.is-right-sidedock-open) .mod-root .workspace-tab-header-container-inner {
      padding-left: 80px;
    }
    .workspace:not(.is-left-sidedock-open).is-right-sidedock-open .mod-root .workspace-tab-header-container-inner {
      padding-right: 8px;
    }

    &.hider-sidebar-buttons {
      .mod-sidedock.mod-left-split .mod-top-left-space .workspace-tab-header-container-inner {
        margin-left: 8px;
      }

      .workspace:not(.is-left-sidedock-open):not(.is-right-sidedock-open) .mod-root .workspace-tab-header-container-inner {
        padding-right: 0;
        padding-left: 32px;
      }
      .workspace.is-left-sidedock-open:not(.is-right-sidedock-open) .mod-root .workspace-tab-header-container-inner {
        padding-left: 40px;
      }
      .workspace:not(.is-left-sidedock-open).is-right-sidedock-open .mod-root .workspace-tab-header-container-inner {
        padding-right: 0;
        padding-left: 32px;
      }
    }
  }

  &.hider-sidebar-buttons {
    --frame-left-space: calc(80px - var(--ribbon-width));
    .mod-sidedock.mod-left-split .mod-top-left-space .workspace-tab-header-container-inner {
      margin-left: 0px;
    }

    .workspace:not(.is-left-sidedock-open):not(.is-right-sidedock-open) .mod-root .workspace-tab-header-container-inner {
      padding-right: 24px;
    }
    .workspace.is-left-sidedock-open:not(.is-right-sidedock-open) .mod-root .workspace-tab-header-container-inner {
      padding-left: 40px;
    }
    .workspace:not(.is-left-sidedock-open).is-right-sidedock-open .mod-root .workspace-tab-header-container-inner {
      padding-right: 16px;
    }
  }

  .workspace-tab-header-container {
    padding-right: 8px !important;
  }

  .sidebar-toggle-button.mod-right {
    position: relative !important;
    padding: 0 !important;
  }

  .workspace:not(.is-left-sidedock-open):not(.is-right-sidedock-open) .mod-root .workspace-tab-header-container-inner {
    padding-right: 24px;
  }
  .workspace.is-left-sidedock-open:not(.is-right-sidedock-open) .mod-root .workspace-tab-header-container-inner {
    padding-left: 80px;
  }
  .workspace:not(.is-left-sidedock-open).is-right-sidedock-open .mod-root .workspace-tab-header-container-inner {
    padding-right: 56px;
  }
  .workspace.is-left-sidedock-open.is-right-sidedock-open .mod-root .workspace-tab-header-container-inner {
    padding-left: 48px;
  }
}

body.mod-windows.is-hidden-frameless,
body.mod-linux.is-hidden-frameless {
  &.show-ribbon {
    .mod-sidedock.mod-left-split .mod-top-left-space .workspace-tab-header-container {
      padding-left: 0;
    }
    .mod-sidedock.mod-left-split .mod-top-left-space .workspace-tab-header-container-inner {
      z-index: 11;
      margin-left: 0;
    }
    .workspace:not(.is-left-sidedock-open):not(.is-right-sidedock-open) .mod-root .workspace-tab-header-container-inner {
      padding-left: calc(88px + var(--frame-right-space));
    }
    .workspace:not(.is-left-sidedock-open).is-right-sidedock-open .mod-root .workspace-tab-header-container-inner {
      padding-left: 88px;
    }

    &.hider-sidebar-buttons {
      .workspace:not(.is-left-sidedock-open).is-right-sidedock-open .mod-root .workspace-tab-header-container-inner {
        padding-left: 48px;
      }
    }
  }

  &.hider-sidebar-buttons {
    .workspace:not(.is-left-sidedock-open):not(.is-right-sidedock-open) .mod-root .workspace-tab-header-container-inner {
      padding-left: calc(48px + var(--frame-right-space));
    }
    .workspace.is-left-sidedock-open:not(.is-right-sidedock-open) .mod-root .workspace-tab-header-container-inner {
      padding-left: calc(40px + var(--frame-right-space));
    }
    .workspace.is-left-sidedock-open.is-right-sidedock-open .mod-root .workspace-tab-header-container-inner {
      padding-left: 48px;
    }
  }

  .workspace:not(.is-left-sidedock-open):not(.is-right-sidedock-open) .mod-root .workspace-tab-header-container-inner {
    padding-left: calc(48px + var(--frame-right-space));
  }
  .workspace.is-left-sidedock-open:not(.is-right-sidedock-open) .mod-root .workspace-tab-header-container-inner {
    padding-left: calc(80px + var(--frame-right-space));
  }
  .workspace:not(.is-left-sidedock-open).is-right-sidedock-open .mod-root .workspace-tab-header-container-inner {
    padding-left: 56px;
  }
  .workspace.is-left-sidedock-open.is-right-sidedock-open .mod-root .workspace-tab-header-container-inner {
    padding-left: 88px;
  }
}

body:not(.is-mobile):not(.is-hidden-frameless) {
  &.show-ribbon .workspace:not(.is-left-sidedock-open):not(.is-right-sidedock-open) .mod-root .workspace-tab-header-container-inner {
    padding-left: 88px;
  }

  .workspace:not(.is-left-sidedock-open):not(.is-right-sidedock-open) .mod-root .workspace-tab-header-container-inner {
    padding-left: 48px;
  }
  .workspace.is-left-sidedock-open:not(.is-right-sidedock-open) .mod-root .workspace-tab-header-container-inner {
    padding-left: 80px;
  }
  .workspace:not(.is-left-sidedock-open).is-right-sidedock-open .mod-root .workspace-tab-header-container-inner {
    padding-left: 48px;
  }
  .workspace.is-left-sidedock-open.is-right-sidedock-open .mod-root .workspace-tab-header-container-inner {
    padding-left: 48px;
  }
}

body.is-tablet {
  .workspace-tab-header-container {
    padding: 0 16px !important;
  }

  .workspace-tab-header-container-inner {
    margin: 6px 0;
    padding-left: 88px !important;
  }
}

/********** Editor **********/
.markdown-reading-view,
.markdown-source-view {
  transition: var(--anim-duration-fast) ease-in-out;
}

.markdown-preview-view {
  scrollbar-gutter: auto;
}

.mod-root .workspace-leaf-content[data-mode="source"] .view-header .view-actions button:nth-last-child(2) {
  background-color: var(--interactive-accent) !important;
  color: var(--text-on-accent) !important;
}

.workspace-leaf-content[data-mode="source"] .markdown-reading-view {
  transform: scale(0.99);
}

.workspace-leaf-content[data-mode="preview"] .markdown-source-view {
  transform: scale(0.99);
}

.workspace-tabs {
  overflow: visible;
}

.workspace-tabs.mod-top {
  overflow: visible;
}

.mod-fade::before,
.mod-fade::after {
  display: none;
}

.inline-title {
  margin-bottom: 24px;
  border-bottom: var(--hr-thickness) solid var(--hr-color);
  padding-bottom: 16px;
}

img {
  border-radius: var(--radius-s);
}

svg.svg-icon {
  fill: none;
}

.markdown-rendered code,
.cm-s-obsidian .cm-inline-code:not(.cm-formatting) {
  border: var(--border-width) solid var(--background-modifier-border);
  padding: 2px 4px;
}

.markdown-rendered pre,
.HyperMD-codeblock {
  box-shadow: rgba(0, 0, 0, 0.04) 0px 2px 8px -2px, rgba(0, 0, 0, 0.04) 0px 2px 4px -2px;
  border: var(--border-width) solid var(--background-modifier-border);
}

.HyperMD-codeblock-begin {
  border-bottom: none;
}
.HyperMD-codeblock:not(.HyperMD-codeblock-begin):not(.HyperMD-codeblock-end) {
  border-top: none;
  border-bottom: none;
}
.HyperMD-codeblock-end {
  border-top: none;
}

.markdown-rendered button.copy-code-button,
.markdown-source-view.mod-cm6 .edit-block-button,
.code-block-flair {
  top: 4px;
  margin: 0;
  box-shadow: none !important;
  padding: 8px !important;
  min-width: 32px !important;
  height: 32px !important;
}

.markdown-reading-view .markdown-rendered button.copy-code-button {
  inset-inline-end: 4px;
}

.markdown-source-view .markdown-rendered button.copy-code-button {
  inset-inline-end: 36px;
}

.markdown-rendered mark,
.cm-s-obsidian span.cm-formatting-highlight,
.cm-s-obsidian span.cm-highlight {
  border-radius: var(--radius-s);
  padding: 1px 4px;
  color: var(--color-orange);
}

.callout {
  background-color: rgba(var(--callout-color), 0.15);

  p:last-child {
    margin-bottom: 0;
  }

  pre {
    border: var(--border-width) solid var(--background-modifier-border);
  }

  .callout-title {
    align-items: center;
    gap: 8px;
  }

  .callout-title-inner {
    --p-spacing: 0;
  }

  .callout-icon svg.svg-icon {
    --icon-size: var(--icon-s);
  }

  .callout-content > *:last-child {
    margin-bottom: 0 !important;
  }

  .callout-content .callout {
    border: var(--border-width) solid var(--background-modifier-border);
    background-color: transparent;
  }
}

body:not(.active-line-off) .markdown-source-view .cm-active:not(:has(.cm-fold-indicator):hover) {
  &::after {
    position: absolute;
    top: 4px;
    bottom: 4px;
    left: -12px;
    border-left: 4px solid var(--background-modifier-border-hover);
    border-radius: var(--input-radius);
    content: "";
  }

  &[dir="rtl"]::after {
    right: -12px;
    left: unset;
  }
}

body:not(.alt-heading-off) {
  --h1-size: 1.1875em;
  --h2-size: 1.125em;
  --h3-size: 1.0625em;
  --h4-size: 1em;
  --h5-size: 0.8125em;
  --h6-size: 0.8125em;

  h4,
  .markdown-rendered h4,
  .cm-header-4 {
    opacity: 0.8;
    letter-spacing: normal;
  }

  h5,
  .markdown-rendered h5,
  .cm-header-5 {
    opacity: 0.5;
    letter-spacing: normal;
    text-transform: uppercase;
  }

  h6,
  .markdown-rendered h6,
  .cm-header-6 {
    opacity: 0.5;
    font-weight: normal;
    letter-spacing: normal;
    text-transform: uppercase;
  }
}

:root table {
  border-collapse: separate;
  border-spacing: 0;
}

body {
  --table-header-border-width: 0;
  --table-row-last-border-width: 0;
  --table-column-first-border-width: 0;
  --table-column-last-border-width: 0;
}

body:not(.full-table-off) table,
body:not(.full-table-off) .table-wrapper {
  width: 100% !important;
}

.view-content .markdown-preview-view,
.view-content .cm-sizer {
  table {
    position: relative;
    border-radius: var(--radius-s);
  }

  table::before {
    position: absolute;
    z-index: 1;
    inset: 0;
    border: var(--table-border-width) solid var(--table-border-color);
    border-radius: var(--radius-s);
    width: calc(100% - 2px);
    height: calc(100% - 2px);
    pointer-events: none;
    content: "";
  }

  .table-cell-wrapper:active,
  .table-cell-wrapper:focus,
  .table-cell-wrapper:focus-within {
    background-color: var(--background-modifier-hover) !important;
  }

  thead,
  tbody {
    background-color: var(--background-secondary);
  }

  thead tr th {
    border-top: none;
  }

  tr td,
  tr th {
    border-top: var(--table-border-width) solid var(--table-border-color);
    border-right: none !important;
    border-bottom: none !important;
    border-left: var(--table-border-width) solid var(--table-border-color);
  }

  th:first-child,
  th:first-child .table-cell-wrapper {
    border-top-left-radius: var(--radius-s);
  }
  th:last-child,
  th:last-child .table-cell-wrapper {
    border-top-right-radius: var(--radius-s);
  }
  tr:last-child td:first-child,
  tr:last-child td:first-child .table-cell-wrapper {
    border-bottom-left-radius: var(--radius-s);
  }
  tr:last-child td:last-child,
  tr:last-child td:last-child .table-cell-wrapper {
    border-bottom-right-radius: var(--radius-s);
  }

  .cm-table-widget[dir="rtl"],
  .el-table[dir="rtl"] {
    th:first-child,
    th:first-child .table-cell-wrapper {
      border-top-right-radius: var(--radius-s);
      border-top-left-radius: 0;
    }
    th:last-child,
    th:last-child .table-cell-wrapper {
      border-top-right-radius: 0;
      border-top-left-radius: var(--radius-s);
    }
    tr:last-child td:first-child,
    tr:last-child td:first-child .table-cell-wrapper {
      border-bottom-right-radius: var(--radius-s);
      border-bottom-left-radius: 0;
    }
    tr:last-child td:last-child,
    tr:last-child td:last-child .table-cell-wrapper {
      border-bottom-right-radius: 0;
      border-bottom-left-radius: var(--radius-s);
    }

    tr th:first-child,
    tr td:first-child {
      border-right-width: 0 !important;
    }
    tr th:last-child,
    tr td:last-child {
      border-left-width: 0 !important;
    }
  }

  .markdown-embed,
  .file-embed {
    border-radius: var(--radius-m);
    background-color: var(--background-secondary);
    padding: 16px;
  }
}

.cm-html-embed td,
.markdown-rendered td,
.cm-html-embed th,
.markdown-rendered th,
.markdown-source-view.mod-cm6 .cm-table-widget .table-cell-wrapper {
  padding: 8px;
}

body:not(.is-phone) {
  .view-header {
    flex-shrink: 0;
    border: none;
    padding: 0 8px;
    height: var(--view-header-height);
  }

  .view-header-title-parent .view-header-breadcrumb,
  .view-header-title-parent .view-header-breadcrumb-separator {
    opacity: 0.5;
    color: var(--text-muted);
  }
}

body:not(.is-mobile) {
  &.theme-light .mod-root > .workspace-tabs:only-of-type > .workspace-tab-container {
    box-shadow: rgba(31, 34, 37, 0.09) 0px 0px 0px 1px, rgba(0, 0, 0, 0.04) 0px 24px 48px, rgba(0, 0, 0, 0.02) 0px 4px 16px;
  }
  &.theme-dark .mod-root > .workspace-tabs:only-of-type > .workspace-tab-container {
    box-shadow: rgba(244, 244, 244, 0.12) 0px 0px 0px 1px, rgba(0, 0, 0, 0.16) 0px 24px 48px, rgba(0, 0, 0, 0.12) 0px 4px 16px;
  }

  .mod-root > .workspace-tabs:not(:only-of-type) .workspace-tab-header-container-inner,
  .mod-root .mod-horizontal > .workspace-tabs .workspace-tab-header-container-inner {
    justify-content: flex-start !important;
    padding: 0 !important;
  }

  .mod-root {
    padding-bottom: 8px;

    .workspace-tab-container {
      box-shadow: rgba(244, 244, 244, 0.12) 0px 0px 0px 1px;
      border-radius: var(--radius-l);
    }

    .workspace-tabs:not(:only-of-type) .workspace-tab-container {
      margin: 0 !important;
    }
  }

  .mod-horizontal > .workspace-tabs > .workspace-leaf-resize-handle,
  .mod-horizontal > .mod-vertical > .workspace-leaf-resize-handle {
    border-color: transparent;
  }

  .view-header button {
    padding: 4px 12px;
  }

  &:not(.show-ribbon) .workspace:not(.is-left-sidedock-open) .mod-root .workspace-tab-container {
    margin-left: 8px;
    border-radius: var(--radius-m);
  }
  .workspace:not(.is-right-sidedock-open) .mod-root .workspace-tab-container {
    margin-right: 8px;
    border-radius: var(--radius-m);
  }

  .workspace:not(.is-left-sidedock-open):not(.is-right-sidedock-open) {
    background-color: var(--background-primary);

    .mod-root {
      padding-bottom: 0;
    }

    .mod-root .workspace-tab-container {
      margin: 0 !important;
      box-shadow: none !important;
      border: 0px solid transparent !important;
      border-radius: 0;
    }
  }
}

body.is-mobile {
  .mod-root .view-content {
    background-color: var(--background-primary);
  }

  .markdown-preview-view .task-list-item-checkbox {
    top: 0.25em;
    margin-inline-start: calc((var(--checkbox-size) + 8px) * -1);
    margin-inline-end: 10px;
  }
}

body.is-phone {
  div:not(.markdown-embed-content) > .markdown-reading-view > div:first-child,
  div:not(.markdown-embed-content) > .markdown-source-view > div:first-child {
    padding-top: calc(var(--safe-area-inset-top) + var(--view-header-height) + 16px);
  }

  .mod-root .view-content > div:not(.markdown-source-view):not(.markdown-reading-view):not(.canvas-wrapper):not(.empty-state) {
    padding-top: calc(var(--safe-area-inset-top) + var(--view-header-height));
  }
}

body.is-tablet {
  .mod-root .workspace-leaf {
    contain: none !important;
  }
  .mod-root .workspace-tabs.mod-stacked .workspace-tab-header-container-inner {
    display: none;
  }

  .view-header {
    padding: 0 16px;

    button {
      height: 100%;
    }
  }
  .view-header-nav-buttons,
  .view-actions {
    gap: 0px;
  }

  .document-search-container {
    position: fixed;
    bottom: 0;
    border: none;
    background-color: transparent;
    padding-bottom: var(--safe-area-inset-bottom);
    width: 100%;
  }
  .document-search-container::before {
    z-index: -2 !important;
    backdrop-filter: blur(16px) saturate(1.5);
  }
  .document-search-container::before,
  .document-search-container::after {
    position: absolute;
    z-index: -1;
    mask: linear-gradient(to bottom, hsla(0, 0%, 0%, 0) 0%, hsla(0, 0%, 0%, 0.013) 4.7%, hsla(0, 0%, 0%, 0.049) 8.9%, hsla(0, 0%, 0%, 0.104) 12.8%, hsla(0, 0%, 0%, 0.175) 16.6%, hsla(0, 0%, 0%, 0.259) 20.4%, hsla(0, 0%, 0%, 0.352) 24.4%, hsla(0, 0%, 0%, 0.45) 28.8%, hsla(0, 0%, 0%, 0.55) 33.8%, hsla(0, 0%, 0%, 0.648) 39.6%, hsla(0, 0%, 0%, 0.741) 46.3%, hsla(0, 0%, 0%, 0.825) 54.1%, hsla(0, 0%, 0%, 0.896) 63.2%, hsla(0, 0%, 0%, 0.951) 73.8%, hsla(0, 0%, 0%, 0.987) 86%, hsl(0, 0%, 0%) 100%);
    inset: -16px 0 0;
    pointer-events: none;
    content: "";
  }
}

/********** Frontmatter **********/
body:not(.hide-frontmatter-off) .metadata-properties-heading {
  display: none;
}

.metadata-container {
  --icon-size: 16px;
  transform: none;

  .metadata-properties-heading {
    padding: 16px 0 4px;
    color: var(--text-muted);
  }

  .metadata-properties {
    border-radius: var(--radius-s);
    background-color: var(--background-secondary);
  }

  .metadata-property-icon::before {
    display: none;
  }

  .metadata-property-key {
    align-items: center;
    border: none;
    padding: 0 8px 0 16px;
  }

  .metadata-property-value {
    border: none;
    min-height: 40px;
  }

  .metadata-add-button {
    gap: 8px;
    margin: 0;
    padding: 0 16px;
    width: 100%;
    height: 40px;
    color: var(--text-faint);
    font-weight: normal;
  }
}

body:not(.is-mobile) {
  .metadata-add-button {
    display: flex;
    transition: var(--anim-duration-fast) var(--anim-duration-moderate);
    cursor: pointer;
  }

  .markdown-reading-view .metadata-container:not(:hover) {
    .metadata-property[data-property-key="cssclasses"],
    .metadata-add-button {
      visibility: hidden;
      opacity: 0;
      height: 0;
    }
  }

  .prompt.suggestion {
    border-radius: var(--radius-m);
    background-color: var(--background-secondary);
    padding: 6px;

    .suggestion-item {
      padding: 4px 8px;
      font-size: var(--font-ui-small);
    }
  }
}

body.is-mobile {
  .metadata-property-key-input,
  .metadata-property-value {
    background-color: transparent;
  }

  .metadata-property-warning-icon {
    height: auto;
  }
}

/********** Modal **********/
body:not(.is-mobile) {
  &.blur-effect-off {
    .modal {
      backdrop-filter: none;
      background-color: var(--background-secondary);
    }
  }

  &.mod-macos {
    .modal:not(.mod-settings) {
      animation: var(--anim-duration-fast) fadeInDown;
    }

    .modal-container {
      .modal-title {
        font-weight: 700;
        font-size: var(--font-ui-medium);
      }

      .modal-content,
      .mod-checkbox {
        font-size: var(--font-ui-small);
      }
    }
  }

  .modal-bg {
    background-color: transparent;
  }

  .modal {
    backdrop-filter: blur(32px);
  }

  .modal:not(.mod-settings):not(.mod-community-modal) {
    .modal-title,
    h1,
    h2,
    h3,
    p {
      text-align: center;
    }

    button {
      position: relative;
    }

    .modal-header {
      margin: 0;
    }

    .modal-title {
      margin: 4px 0 8px;

      &:empty {
        display: none;
      }
    }

    .modal-button-container {
      justify-content: center;

      button {
        flex-grow: 1;
        width: 0;
        line-height: var(--line-height-normal);
      }

      .mod-checkbox {
        justify-content: center;
        margin-bottom: 8px;
        width: 100%;
      }
    }
  }
}

body.is-mobile {
  .mod-confirmation .modal:not(.mod-lg) {
    --interactive-normal: unset;
    backdrop-filter: blur(32px);
    background-color: var(--modal-background);
  }

  .modal {
    .modal-header {
      border: none !important;
    }

    .modal-nav-action {
      margin-top: unset;
      box-shadow: none !important;
      background-color: transparent;
      padding: 16px 12px;
      height: unset;

      &:first-of-type {
        left: 16px;
      }
      &:last-of-type {
        right: 16px;
      }
    }
  }

  .modal:not([class*="mod-"]:not(.mod-file-rename)) {
    bottom: var(--safe-area-inset-bottom);
    backdrop-filter: blur(32px);
    box-shadow: none;
    border-radius: var(--radius-xl);
    padding: 0;
    width: 95%;

    .modal-header {
      border: none;
      padding: 24px 0 8px;
      color: var(--text-muted);
    }

    .modal-content {
      padding: 8px 16px 24px;
      color: var(--text-muted);
      text-align: center;
    }

    .modal-content p {
      margin: 0.1em;
    }

    .setting-item {
      margin-top: 16px;
      border: none;
    }

    textarea {
      line-height: var(--input-height);
    }

    .modal-button-container {
      gap: 0;
      margin: 0;
      padding: 0;

      button {
        justify-content: center;
        margin: 0;
        border-top: var(--border-width) solid var(--background-modifier-border);
        border-radius: 0;
        background-color: transparent;
        padding: 32px 0;
        color: var(--text-accent);
        font-size: var(--font-ui-medium);
      }

      .mod-destructive,
      .mod-warning {
        color: var(--text-error);
      }
    }
  }
}

body.is-phone {
  .modal {
    box-shadow: none !important;
    padding-bottom: var(--safe-area-inset-bottom);
  }
}

body.is-tablet {
  .modal {
    outline: var(--prompt-border-width) solid var(--background-modifier-hover);
  }

  .modal:not([class*="mod-"]:not(.mod-file-rename)) {
    width: 35%;
  }

  .modal-title {
    font-size: var(--font-ui-medium);
    text-align: center;
  }
}

/********** Menu and Suggestions **********/

body:not(.is-mobile).blur-effect-off .menu,
body:not(.is-mobile).blur-effect-off .suggestion-container {
  backdrop-filter: none;
  background-color: var(--background-secondary);
}

body:not(.is-mobile) .menu,
body:not(.is-mobile) .suggestion-container {
  backdrop-filter: blur(32px);
  border: var(--prompt-border-width) solid var(--prompt-border-color);
  border-radius: var(--radius-m);
  background-color: var(--modal-background);
  padding: 0;

  > div {
    padding: 4px;
  }

  .menu-separator {
    margin: 6px 8px;
  }

  .menu-item,
  .suggestion-item {
    border-radius: 4px;
    padding: var(--size-4-1) var(--size-4-2);
    font-size: var(--font-ui-small);
  }
  .menu-item.selected:not(.is-label):not(.is-disabled),
  .suggestion-item.is-selected:not(.mod-group) {
    background-color: var(--interactive-accent);
    color: var(--text-on-accent);

    .menu-item-icon,
    .suggestion-flair {
      color: var(--text-on-accent);
    }
  }

  .search-suggest-item.mod-group {
    margin: 0;
    padding: 4px 8px;
  }
  .search-suggest-item.mod-group:not(:first-child) {
    margin-top: 8px;
  }
  .search-suggest-item:not(.mod-group).is-selected {
    --text-muted: var(--text-on-accent);
  }
}

body.is-phone,
body.is-tablet:not(.tablet-menu-fix) {
  .menu {
    backdrop-filter: blur(32px);
    background-color: var(--modal-background);
    padding: 0;
    overflow: hidden;
    white-space: normal;
  }

  .menu-item:not(.is-label) {
    flex-direction: row-reverse;
    padding: 16px;
  }
  .menu-item-title {
    white-space: normal;
  }

  .menu-scroll {
    background-color: transparent;
    max-height: 80vh;
  }
  .menu-scroll:has(.mod-checked) .menu-item.tappable:not(:has(.mod-checked)) .menu-item-title {
    margin-left: calc(var(--icon-size) + 8px);
  }
  .menu-item-icon {
    --icon-size: var(--icon-m);
    justify-content: center;
    width: var(--icon-size);
  }
  .menu-item.is-label {
    border: none !important;
    background-color: transparent;
  }
  .menu-item:not(.is-label[data-section="title"]) {
    background-color: rgb(from var(--background-secondary-alt) r g b / 75%);
  }
  .menu-item:not(:has(+ .menu-separator)):not(:last-child) {
    border-bottom: var(--border-width) solid var(--background-modifier-border-hover);
  }

  .menu-separator {
    border: none;
  }

  .suggestion-container {
    backdrop-filter: blur(32px);
    border: none;
    background-color: rgb(from var(--background-secondary-alt) r g b / 75%) !important;

    .suggestion {
      padding: 0;
    }
    .suggestion-item {
      display: flex;
      align-items: center;
      margin: 0;
      border-bottom: var(--border-width) solid var(--background-modifier-border-hover);
      border-radius: 0;
      background-color: transparent;
      padding: 8px 16px;
      min-height: var(--input-height);
    }
    .suggestion-item:last-child {
      border: none;
    }
  }
}

body.is-phone {
  .menu {
    box-shadow: none;
  }
  .menu-grabber {
    position: absolute;
    top: 8px;
    align-self: center;
    width: 36px;
    height: 5px;
  }
  .menu-scroll {
    padding: 40px 16px calc(var(--safe-area-inset-bottom) + 16px);
  }
  .menu-item + .menu-item,
  .menu-item:has(+ .menu-item) {
    border-radius: 0;
  }
  .menu-separator + .menu-item,
  .menu-item:first-child:has(+ .menu-item) {
    border-top-right-radius: var(--radius-s);
    border-top-left-radius: var(--radius-s);
  }
  .menu-item:has(+ .menu-separator),
  .menu-item + .menu-item:last-child {
    border-bottom-right-radius: var(--radius-s);
    border-bottom-left-radius: var(--radius-s);
  }
}

body.is-tablet:not(.tablet-menu-fix) {
  &.theme-light {
    .menu-item:not(.is-label[data-section="title"]) {
      background-color: rgb(from var(--background-primary) r g b / 50%);
    }
  }
  &.theme-dark {
    .menu-item:not(.is-label[data-section="title"]) {
      background-color: rgb(from var(--background-secondary-alt) r g b / 25%);
    }
  }

  .menu {
    box-shadow: 0 0 0 10000px rgba(0, 0, 0, 0.2);
    background-color: rgb(from var(--background-secondary) r g b / 90%);
    min-width: 240px;
  }
  .menu-item {
    border-radius: 0;
  }
  .menu-item.is-label {
    padding: 8px;
  }
  .menu-separator {
    margin: 4px;
  }
}

/********** Prompt **********/

body:not(.is-phone) {
  &.blur-effect-off .prompt {
    backdrop-filter: none;
    background-color: var(--background-secondary) !important;
  }

  .modal-container:has(.prompt):not(:last-child) {
    opacity: 0;
  }

  .prompt {
    backdrop-filter: blur(32px);
    border: var(--prompt-border-width) solid var(--prompt-border-color);
    background-color: var(--workspace-background-translucent);
  }

  .prompt-input {
    border-color: var(--background-modifier-border);
    background-color: transparent;
    font-size: var(--font-ui-large);
  }

  .prompt-instructions {
    border-color: var(--background-modifier-border);
    color: var(--text-faint);
  }

  .prompt .suggestion-item {
    padding: 8px 16px;
  }
}

body.is-phone {
  &.is-android {
    animation: var(--anim-duration-fast) fadeInScale !important;
  }

  .prompt {
    --prompt-top: calc(var(--safe-area-inset-top) + 8px);
    backdrop-filter: blur(32px);
    animation: var(--anim-duration-slow) blurInScale !important;
    transition: var(--anim-duration-fast);
    margin-top: var(--prompt-top);
    box-shadow: var(--shadow-l);
    border: var(--prompt-border-width) solid var(--background-modifier-hover);
    border-radius: var(--radius-l);
    background-color: var(--modal-background) !important;
    width: 95vw;
    height: 70vh;
  }

  .prompt-input {
    background-color: transparent !important;
    padding: 24px 24px !important;
  }

  .prompt-results {
    padding: 12px;
  }

  .prompt .suggestion-item {
    padding: 12px 16px;
  }
}

body.is-tablet {
  .prompt {
    --prompt-bottom: 0;

    animation: var(--anim-duration-slow) blurInScale;
    outline: var(--prompt-border-width) solid var(--background-modifier-hover);
    background-color: var(--modal-background) !important;
  }

  .prompt-input {
    border: none;
    background-color: transparent !important;
  }

  .prompt-input-container {
    display: flex;
    align-items: center;
    border-bottom: var(--border-width) solid var(--background-modifier-border);
  }

  .prompt-input-container::before {
    margin-left: 16px;
    -webkit-mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><circle cx='11' cy='11' r='8'></circle><line x1='21' y1='21' x2='16.65' y2='16.65'></line></svg>");
    -webkit-mask-repeat: no-repeat;
    display: block;
    background-color: var(--search-icon-color);
    width: var(--icon-l);
    height: var(--icon-l);
    content: "";
  }

  .prompt .suggestion-item {
    padding: 12px 16px;
  }
}

/********** New Tab **********/

.view-header,
.view-content,
.workspace-tab-container {
  transition: all var(--anim-duration-fast);
}

.workspace-leaf-content[data-type="empty"] .empty-state {
  .empty-state-container {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0;
    margin-top: var(--view-header-height);
    padding: var(--file-margins);
    width: 100%;
    max-width: 100%;
    height: 100%;
    max-height: 100%;
  }

  .empty-state-container::before {
    -webkit-mask-size: contain;
    -webkit-mask-position: center;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="140" height="180" viewBox="0 0 140 180" fill="none"><path d="M49.775 105.089C54.3828 103.715 61.8069 101.605 70.3434 101.082C65.2222 88.1449 63.986 76.8242 64.9803 66.7442C66.1285 55.1033 70.23 45.3874 74.228 37.1201C75.0811 35.3561 75.9012 33.7135 76.6879 32.1378C77.8017 29.9069 78.8486 27.81 79.8278 25.6916C81.4579 22.1652 82.6674 19.051 83.2791 16.1576C83.8806 13.3125 83.8838 10.7715 83.1727 8.3342C82.4607 5.89352 80.9475 3.26635 78.0704 0.386692C74.3134 -0.587559 70.1448 0.267767 67.0197 3.08162L29.9298 36.4772C27.861 38.34 26.503 40.8642 26.0879 43.6182L22.8899 64.8384C27.9185 69.2873 40.33 82.2201 47.8789 100.165C48.5525 101.766 49.1875 103.408 49.775 105.089Z" fill="white"/><path d="M21.3902 74.5293C21.2153 75.2761 20.9692 76.0051 20.6549 76.7063L1.05225 120.436C-0.961131 124.928 -0.0336421 130.194 3.39276 133.726L34.2418 165.523C49.9952 142.262 47.6984 120.379 40.5026 103.274C35.0465 90.3037 26.777 80.1526 21.3902 74.5293Z" fill="white"/><path d="M41.3687 169.269C41.9093 169.355 42.4575 169.407 43.0096 169.424C48.864 169.6 58.7098 170.109 66.6947 171.582C73.2088 172.783 86.1213 176.397 96.747 179.505C104.855 181.877 113.211 175.396 114.387 167.024C115.245 160.917 116.855 154.009 119.821 147.677L119.753 147.702C114.73 133.682 108.34 124.629 101.641 118.849C94.9619 113.086 87.7708 110.397 80.8276 109.42C69.2835 107.795 58.7071 110.832 52.0453 112.791C56.0353 129.428 54.8074 149.004 41.3687 169.269Z" fill="white"/><path d="M124.96 139.034C131.626 128.965 136.375 121.134 138.881 116.888C140.135 114.764 139.907 112.102 138.423 110.133C134.554 105.002 127.152 94.5755 123.12 84.9218C118.973 74.9962 118.355 59.5866 118.319 52.081C118.306 49.2279 117.402 46.4413 115.639 44.1994L91.6762 13.73C91.5918 15.1034 91.3946 16.4659 91.1093 17.8158C90.3118 21.5882 88.8073 25.3437 87.0916 29.0552C86.086 31.2306 84.9238 33.5612 83.7497 35.9157C82.9682 37.4827 82.1814 39.0607 81.432 40.6102C77.5579 48.6212 73.9528 57.3151 72.9451 67.5313C72.011 77.0006 73.2894 88.014 79.0482 101.162C80.0074 101.243 80.9727 101.351 81.9422 101.487C90.2067 102.651 98.8807 105.891 106.866 112.781C113.73 118.704 119.932 127.19 124.96 139.034Z" fill="white"/></svg>');
    position: absolute;
    margin-top: calc(-1 * (var(--header-height) + var(--view-header-height)));
    background-color: var(--background-modifier-hover);
    width: 20%;
    height: 20%;
    pointer-events: none;
    content: "";
  }

  .empty-state-title {
    display: none;
  }

  .empty-state-action-list {
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    align-items: center;
    gap: 4px;
    margin: 0;
    width: 100%;
    max-width: var(--file-line-width);
    height: 100%;
  }

  .empty-state-action {
    cursor: pointer;
  }
  .empty-state-action.mod-close {
    display: none;
  }

  .empty-state-action:first-child {
    width: 100%;
    height: 100%;
    font-weight: var(--inline-title-weight);
    font-size: var(--inline-title-size);
    line-height: var(--inline-title-line-height);
    letter-spacing: -0.015em;
    text-align: left;

    &::after {
      content: "...";
    }
  }

  .empty-state-action:nth-child(2) {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 8px;
    cursor: text;
    margin-bottom: 16px;
    border: var(--input-border-width) solid var(--background-modifier-border);
    border-radius: var(--radius-l);
    background-color: var(--background-modifier-hover);
    padding: 4px 16px;
    width: 100%;
    color: var(--text-normal);
    text-align: left;

    &::before {
      -webkit-mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><circle cx='11' cy='11' r='8'></circle><line x1='21' y1='21' x2='16.65' y2='16.65'></line></svg>");
      -webkit-mask-repeat: no-repeat;
      display: block;
      background-color: var(--search-icon-color);
      width: var(--search-icon-size);
      height: var(--search-icon-size);
      content: "";
    }
  }
}

.mod-root .mod-horizontal > .workspace-tabs .empty-state-container {
  padding-bottom: 16px !important;

  .empty-state-action:nth-child(2) {
    margin-bottom: 0;
  }

  &::before {
    display: none;
  }
}

body.is-mobile {
  .empty-state-container {
    padding-bottom: 96px !important;
    &::before {
      margin-top: 44px !important;
    }
  }
  .empty-state-action {
    margin: unset;
    background-color: transparent;
    padding: unset;
  }
  .empty-state-action:first-child {
    margin-top: 0;
    padding-top: calc(var(--safe-area-inset-top) + 12px);
  }
  .empty-state-action:nth-child(2) {
    background-color: var(--background-secondary) !important;
    padding: 4px 16px;
  }
  .empty-state-action:nth-child(n + 3) {
    margin: 4px 0;
  }
}

body.is-tablet {
  .empty-state-container::before {
    margin-top: calc(-1 * var(--header-height));
  }
  .empty-state-action:first-child {
    margin-top: 0;
    padding-top: 5px;
  }
}

/********** Settings **********/

body:not(.is-phone) .modal {
  .vertical-tab-header {
    background-color: transparent;
  }

  .modal-sidebar {
    background-color: transparent;
  }

  .installed-plugins-container {
    border: none;
    padding: 0;
  }
}

body:not(.mod-windows):not(.is-mobile),
body.windows-mode-off:not(.is-mobile) {
  &:not(.blur-effect-off) {
    &.theme-light .vertical-tab-header {
      background-color: rgb(from var(--color-base-30) r g b / 75%);
    }
    &.theme-dark .vertical-tab-header {
      background-color: rgb(from var(--color-base-10) r g b / 75%);
    }
    .vertical-tab-content,
    .community-modal-details {
      background-color: rgb(from var(--color-base-20) r g b / 75%);
    }
  }

  &.blur-effect-off {
    &.theme-light .vertical-tab-header {
      background-color: var(--color-base-30);
    }
    &.theme-dark .vertical-tab-header {
      background-color: var(--color-base-10);
    }
    .vertical-tab-content,
    .community-modal-details {
      background-color: var(--color-base-20);
    }
  }
  &.theme-light .modal {
    outline: var(--border-width) solid var(--divider-color);
  }
  &.theme-dark {
    .vertical-tab-header {
      margin: 1px 0 1px 1px;
      border-radius: var(--modal-radius) 0 0 var(--modal-radius);
    }
    .vertical-tab-content {
      margin: 1px 1px 1px 0;
      border-radius: 0 var(--modal-radius) var(--modal-radius) 0;
    }
  }

  .modal.mod-settings,
  .modal.mod-community-modal {
    .mobile-option-setting-item {
      border: var(--border-width) solid var(--background-modifier-border);
      border-radius: var(--radius-s);
      padding: 12px 16px;
    }

    textarea,
    input[type="text"]:not(.metadata-container input):not(.prompt input),
    input[type="number"],
    input[type="search"] {
      border: var(--border-width) solid var(--background-modifier-border-hover);
    }
  }

  .modal:not(.mod-community-modal) {
    .setting-item-heading {
      border: none;
      padding: 16px 16px 12px;
    }
    .setting-item:not(.setting-item-heading) {
      border-right: var(--border-width) solid var(--background-modifier-border);
      border-left: var(--border-width) solid var(--background-modifier-border);
      border-radius: 0;
      background-color: rgba(var(--mono-rgb-100), 0.02);
      padding: 12px 16px;
    }
    .setting-item-heading + .setting-item,
    *:not(.setting-item) + .setting-item:not(.setting-item-heading),
    .setting-item:first-child:not(.setting-item-heading) {
      border-top: var(--border-width) solid var(--background-modifier-border);
      border-top-right-radius: var(--radius-s) !important;
      border-top-left-radius: var(--radius-s) !important;
    }
    .setting-item:has(+ .setting-item-heading),
    .setting-item:has(+ *:not(.setting-item)):not(.setting-item-heading),
    .setting-item:last-child {
      border-bottom: var(--border-width) solid var(--background-modifier-border);
      border-bottom-right-radius: var(--radius-s) !important;
      border-bottom-left-radius: var(--radius-s) !important;
    }
    .setting-item-info:has(.setting-item-name:empty) .setting-item-description {
      padding: 0;
    }
  }
}

body.is-mobile {
  &.theme-light .modal.mod-settings,
  &.theme-light .modal.mod-community-modal {
    .modal-header,
    .vertical-tab-header,
    .vertical-tab-content,
    .modal-sidebar,
    .community-modal-details {
      background-color: var(--background-secondary);
    }
  }
  &.theme-dark .modal.mod-settings,
  &.theme-dark .modal.mod-community-modal {
    .modal-header,
    .vertical-tab-header,
    .vertical-tab-content,
    .modal-sidebar,
    .community-modal-details {
      background-color: var(--background-primary);
    }
  }

  .modal.mod-settings,
  .modal.mod-community-modal {
    background-color: transparent;

    .modal-header,
    .modal-sidebar {
      border: none !important;
    }

    .vertical-tab-nav-item {
      height: unset;
      min-height: 48px;
      word-break: break-word;
    }

    .vertical-tab-header-group-title {
      padding: 8px;
      color: var(--text-faint);
      font-weight: normal;
      font-size: var(--font-ui-small);
      text-transform: uppercase;
    }

    .vertical-tab-header-group-items {
      border-radius: var(--input-radius);
      background-color: var(--interactive-normal);
      overflow: hidden;
    }

    .community-modal-search-results-wrapper {
      border: none;
      padding: 0 16px;
    }

    .community-modal-search-results {
      gap: 8px;
    }

    .community-item {
      border: none;
      border-radius: var(--input-radius);
      background-color: var(--interactive-normal);
    }

    .community-modal-details {
      background-color: var(--background-secondary);
    }

    .setting-item-heading .setting-item-name {
      color: var(--text-faint);
      font-weight: normal;
      font-size: var(--font-ui-small);
      text-transform: uppercase;
    }
  }
}

body.is-phone {
  .modal:not(.mod-community-modal) {
    .setting-item {
      border: none;
    }
    .setting-item:not(.mod-toggle) .setting-item-info {
      padding: 0 8px;
    }

    .setting-item.mod-toggle,
    .setting-item-control .mobile-option-setting-item {
      border-radius: var(--input-radius);
      background-color: var(--interactive-normal) !important;
      padding: 12px 16px;
    }

    .setting-item.mod-toggle:has(+ .setting-item.mod-toggle) {
      border-bottom: var(--border-width) solid var(--background-modifier-border);
      border-bottom-right-radius: 0;
      border-bottom-left-radius: 0;
    }

    .setting-item.mod-toggle + .setting-item.mod-toggle {
      border-top-right-radius: 0;
      border-top-left-radius: 0;
    }

    .setting-item-control {
      align-items: center;
    }

    .setting-item-control .clickable-icon {
      background-color: var(--interactive-normal);
      min-width: var(--input-height);
      height: var(--input-height);
    }

    .setting-item-control:not(:has(:not(button))) {
      flex-direction: column;
      gap: 0;
      border-radius: var(--input-radius);
      overflow: hidden;
    }

    .setting-item-control:not(:has(:not(button))) > button {
      border-radius: 0;

      &:not(:last-child) {
        border-bottom: var(--border-width) solid var(--background-modifier-border);
      }
    }
  }

  .modal.mod-settings,
  .modal.mod-community-modal {
    .vertical-tab-header,
    .vertical-tab-content {
      padding-right: 16px;
      padding-left: 16px;
    }
  }
}

body.is-tablet {
  .modal:not(.mod-community-modal) {
    .setting-item-heading {
      border: none;
      padding: 8px;
    }
    .setting-item:not(.setting-item-heading) {
      border-radius: 0;
      background-color: var(--interactive-normal);
      padding: 12px 16px;
    }
    .setting-item-heading + .setting-item,
    *:not(.setting-item) + .setting-item:not(.setting-item-heading),
    .setting-item:first-child:not(.setting-item-heading) {
      border-top: none !important;
      border-top-right-radius: var(--radius-s) !important;
      border-top-left-radius: var(--radius-s) !important;
    }
    .setting-item:has(+ .setting-item-heading),
    .setting-item:has(+ *:not(.setting-item)):not(.setting-item-heading),
    .setting-item:last-child {
      border-bottom-right-radius: var(--radius-s) !important;
      border-bottom-left-radius: var(--radius-s) !important;
    }
    .setting-item-info:has(.setting-item-name:empty) .setting-item-description {
      padding: 0;
    }
  }

  .modal.mod-settings,
  .modal.mod-community-modal {
    textarea,
    input[type="text"],
    input[type="search"],
    input[type="number"] {
      background-color: var(--background-modifier-border);
    }
    .vertical-tab-header-group-items {
      gap: 0;
    }
    .vertical-tab-nav-item {
      display: flex;
      align-items: center;
      border-radius: 0;
      padding-left: 16px;

      &:not(:last-child) {
        border-bottom: var(--border-width) solid var(--background-modifier-border);
      }
    }

    button:not(.clickable-icon):not([class*="mod-"]),
    select,
    .dropdown {
      color: var(--text-accent);
    }
    select,
    .dropdown {
      background-color: var(--background-modifier-hover);
    }
  }
}

/********** Notice **********/
.notice-container {
  display: flex;
  top: unset;
  bottom: 16px;
  flex-direction: column;
  gap: 8px;
  overflow: visible;
}

.notice {
  backdrop-filter: blur(32px);
  margin-bottom: 0;
  box-shadow: var(--shadow-s);
  border: var(--border-width) solid var(--background-modifier-hover);
  border-radius: var(--radius-l);
  background-color: var(--modal-background);
  padding: 16px 24px;
  overflow: hidden;
  color: var(--text-muted);
}

/********** Desktop: Status Bar **********/
.status-bar {
  position: absolute !important;
  right: 4px;
  bottom: 4px;
  transition: var(--anim-duration-fast);
  border: var(--border-width) solid var(--background-modifier-border);
  border-radius: var(--radius-xl);
  background-color: var(--background-primary);
  padding: 4px 8px !important;
  min-height: unset;
  color: var(--text-normal);
}

body.hide-status-off:not(.is-mobile) {
  .status-bar:not(:hover) {
    opacity: 0.3;
    border-color: transparent;
    background-color: transparent;
  }
  .mod-sidedock.mod-right-split .workspace-leaf-content > .node-insert-event,
  .mod-sidedock.mod-right-split .workspace-leaf-content > .view-content {
    margin-bottom: 40px;
  }
}

body:not(.hide-status-off) .status-bar {
  right: unset;
  bottom: 2px;
  justify-content: center;
  transition: var(--anim-duration-fast);
  border-color: transparent;
  border-radius: 10000px;
  background-color: rgba(var(--mono-rgb-100), 0.2);
  padding: 8px !important;
  max-width: 100%;

  > div {
    transition: var(--anim-duration-fast);
  }

  &:not(:hover) {
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    max-width: var(--tab-width);
    height: 4px;

    > div {
      transform: scale(0.9);
      opacity: 0;
      filter: blur(4px);
      white-space: nowrap;
    }
  }

  &::before {
    position: absolute;
    transform: scaleY(10);
    z-index: -1;
    transition: var(--anim-duration-fast) var(--anim-duration-fast);
    width: 100%;
    height: 100%;
    content: "";
  }

  &:hover {
    bottom: 4px;
    border-color: var(--background-secondary);
    background-color: rgba(var(--mono-rgb-0), 1);
    height: 40px;

    &::before {
      transform: scaleY(1);
    }
  }
}

.status-bar span {
  white-space: nowrap;
}

body:not(.hide-status-off):not(.is-grabbing) .app-container.no-transition .status-bar {
  bottom: 4px;
  border-color: var(--background-secondary);
  background-color: rgba(var(--mono-rgb-0), 1);
  max-width: 100% !important;
  height: 40px !important;

  > div {
    transform: none !important;
    opacity: 1 !important;
    filter: none !important;
  }
}

/********** Desktop: Tooltip **********/
.tooltip {
  color: var(--text-muted);
}

.tooltip-arrow {
  display: none;
}

/********** Desktop: Popover **********/
.popover {
  backdrop-filter: blur(16px);
  animation: var(--anim-duration-slow) blurInScale;
  border-radius: var(--radius-l);
  background-color: var(--workspace-background-translucent);
}

/********** Mobile: Top Bar **********/

body.is-mobile {
  .view-actions {
    padding: 0;
    height: var(--view-header-height);
  }
  .view-action.clickable-icon {
    width: var(--view-header-height);
    height: var(--view-header-height);
  }
  .view-header-title-container {
    height: var(--view-header-height);
  }

  .workspace .mod-root .workspace-leaf .view-header {
    height: fit-content;

    &::before {
      position: absolute;
      top: 0;
      left: 0;
      z-index: -1;
      backdrop-filter: blur(16px) saturate(1.5);
      background-color: rgb(from var(--background-primary) r g b / 75%) !important;
      width: 100%;
      height: 100%;
      content: "";
    }
  }
}

body.is-phone {
  &:not(.quick-mode-switch-off) .mod-root .workspace-leaf-content[data-type="markdown"] .view-actions button:nth-last-child(2) {
    position: fixed;
    right: max(var(--safe-area-inset-right), 14px);
    bottom: 16px;
    backdrop-filter: blur(32px);
    border: var(--border-width) solid var(--background-modifier-border);
    border-radius: 100%;
    background-color: rgb(from var(--background-secondary) r g b / 50%);
    padding: 14px;
    width: 48px;
    height: 48px;
    color: var(--text-muted);
  }

  .workspace .mod-root .workspace-leaf .view-header {
    position: fixed;
    background-color: transparent;
    padding-top: var(--safe-area-inset-top);
    width: 100%;

    &:has(.view-header-breadcrumb) {
      .view-header-left {
        display: none;
      }

      .view-header-title-container {
        padding: 0 8px;
      }
    }

    .view-header-left,
    .view-header-title-container {
      flex-grow: 0;
    }

    .view-header-title-parent .view-header-breadcrumb {
      padding: 0;
    }

    .view-header-title-parent .view-header-breadcrumb-separator,
    .view-header-title {
      opacity: 0.5;
      color: var(--text-normal);
    }

    .view-header-title-parent:not(:empty) {
      display: flex;
      align-items: center;
      gap: 4px;
      opacity: 1;
    }

    .view-header-breadcrumb:first-child {
      opacity: 1;
      color: var(--interactive-accent);
      font-weight: bold;
    }
  }

  &:not(.mod-toolbar-open):not(.quick-mode-switch-off) .mod-root .view-actions button:nth-last-child(2) {
    margin-bottom: 80px;
  }
}

/********** Mobile: Pull Action **********/

.pull-action {
  backdrop-filter: blur(32px);
  animation: fadeInDown var(--anim-duration-moderate);
  box-shadow: var(--shadow-s);
  border: var(--border-width) solid var(--background-modifier-border);
  background-color: var(--modal-background);
  padding: 12px 24px;
  width: fit-content;
  font-weight: 600;
}

/********** Mobile: Bottom Bar **********/

body.is-mobile {
  &.theme-light .mobile-toolbar {
    background-color: rgb(209, 211, 218);

    .mobile-navbar-action .clickable-icon {
      filter: drop-shadow(0 0 4px white);
    }
  }
  &.theme-dark .mobile-toolbar {
    background-color: rgb(43, 43, 43);

    .mobile-navbar-action .clickable-icon {
      filter: drop-shadow(0 0 4px black);
    }
  }
  &:not(.hide-tabs-count-off) {
    .mobile-navbar-action:nth-child(4) .clickable-icon::before {
      background-color: var(--icon-color);
      width: 24px;
      height: 24px;
      content: "";
      -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgY2xhc3M9Imx1Y2lkZSBsdWNpZGUtY29weSI+PHJlY3Qgd2lkdGg9IjE0IiBoZWlnaHQ9IjE0IiB4PSI4IiB5PSI4IiByeD0iMiIgcnk9IjIiLz48cGF0aCBkPSJNNCAxNmMtMS4xIDAtMi0uOS0yLTJWNGMwLTEuMS45LTIgMi0yaDEwYzEuMSAwIDIgLjkgMiAyIi8+PC9zdmc+");
      -webkit-mask-position: 50%;
      -webkit-mask-size: 100%;
      -webkit-mask-repeat: no-repeat;
    }

    .mobile-navbar-tabs-action {
      display: none;
    }
  }

  .workspace-drawer .nav-header {
    backdrop-filter: blur(32px);
  }
  .mobile-navbar,
  .workspace-drawer .nav-header {
    position: fixed;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: var(--layer-status-bar);
    border: none;
    background-color: transparent;
    padding: 4px max(var(--safe-area-inset-right), 16px) max(4px, var(--safe-area-inset-bottom)) max(var(--safe-area-inset-left), 16px);
  }
  .mobile-navbar::before {
    z-index: -2 !important;
    backdrop-filter: blur(16px) saturate(1.5);
  }
  .mobile-navbar::before,
  .mobile-navbar::after {
    position: absolute;
    z-index: -1;
    mask: linear-gradient(to bottom, hsla(0, 0%, 0%, 0) 0%, hsla(0, 0%, 0%, 0.013) 4.7%, hsla(0, 0%, 0%, 0.049) 8.9%, hsla(0, 0%, 0%, 0.104) 12.8%, hsla(0, 0%, 0%, 0.175) 16.6%, hsla(0, 0%, 0%, 0.259) 20.4%, hsla(0, 0%, 0%, 0.352) 24.4%, hsla(0, 0%, 0%, 0.45) 28.8%, hsla(0, 0%, 0%, 0.55) 33.8%, hsla(0, 0%, 0%, 0.648) 39.6%, hsla(0, 0%, 0%, 0.741) 46.3%, hsla(0, 0%, 0%, 0.825) 54.1%, hsla(0, 0%, 0%, 0.896) 63.2%, hsla(0, 0%, 0%, 0.951) 73.8%, hsla(0, 0%, 0%, 0.987) 86%, hsl(0, 0%, 0%) 100%);
    inset: -16px 0 0;
    pointer-events: none;
    content: "";
  }

  .mobile-navbar-action {
    display: flex;
    justify-content: center;
  }

  .mobile-toolbar-option {
    color: var(--text-normal);
  }
  .mobile-toolbar-options-list {
    padding: 0;
  }

  .mobile-navbar-tabs-action {
    border-width: var(--icon-l-stroke-width);
    border-radius: 30%;
    width: calc(var(--icon-size) - 2px);
    height: calc(var(--icon-size) - 2px);
  }

  .mobile-tab-switcher {
    backdrop-filter: blur(32px);
  }

  .mobile-tab-switcher-menubar {
    padding: 4px max(var(--safe-area-inset-right), 16px) max(4px, var(--safe-area-inset-bottom)) max(var(--safe-area-inset-left), 16px);
  }

  .nav-buttons-container {
    justify-content: space-between;
    padding: 0;
  }
  .nav-action-button {
    flex-grow: 0 !important;
  }
}

body.is-phone {
  &.theme-light {
    .mobile-navbar::after {
      background-color: rgb(from var(--background-primary) r g b / 50%);
    }
    .workspace-drawer .nav-header {
      background-color: rgb(from var(--background-secondary) r g b / 50%);
    }
  }
  &.theme-dark {
    .mobile-navbar::after,
    .workspace-drawer .nav-header {
      background-color: rgb(from var(--background-primary) r g b / 75%);
    }
  }
}

body.is-tablet {
  &.theme-dark {
    .workspace-drawer .nav-header {
      background-color: rgb(from var(--background-primary-alt) r g b / 75%);
    }
    .workspace-drawer.is-pinned .nav-header {
      background-color: rgb(from var(--background-primary) r g b / 75%);
    }
  }
  .nav-buttons-container {
    padding: 0;
  }
}

/********** Mobile: Image Viewer **********/

body.is-mobile {
  .mobile-image-viewer {
    backdrop-filter: blur(32px);
    animation: var(--anim-duration-fast) fadeInScale;
    background-color: var(--workspace-background-translucent);
  }
  .mobile-image-viewer img {
    border-radius: 0;
  }
}
